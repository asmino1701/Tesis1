<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Index.aspx.cs" Inherits="Tesis1.Index" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/Content/web.css" />
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-3.3.1.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
</head>
<body>
    <form id="form1" runat="server">
        <div class="typewriter Title">
            <h1>Bienvenidos al portal</h1>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6">
                    <video class="videoElement" id="video" playsinline autoplay></video>
                </div>
                <div class="col-md-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h2>Configuraciones</h2>
                        </div>
                        <div class="panel-body">
                            <div>
                                <h3 class="card-subtitle">Objetos:</h3>
                            </div>
                            <div class="check">
                                <asp:CheckBox ID="CbxCasco" runat="server" Text="Casco" />
                                <br />
                                <asp:CheckBox ID="CbxChaleco" runat="server" Text="Chaleco" />
                            </div>
                            <div>
                                <div class="card-subtitle">
                                    <h3 class="card-subtitle">Correo:<span style="color: red;"> *</span></h3>
                                </div>
                                <div>
                                    <asp:TextBox ID="TxtCorreo" runat="server" placeholder="Ingrese un correo para recibir las alertas de seguridad" CssClass="form-control"></asp:TextBox>
                                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"
                                        ControlToValidate="TxtCorreo" ErrorMessage="Se requiere un correo electrónico."
                                        ForeColor="Red" SetFocusOnError="True">
                                    </asp:RequiredFieldValidator>

                                    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server"
                                        ErrorMessage="Formato de correo inválido." ControlToValidate="TxtCorreo"
                                        SetFocusOnError="True" ForeColor="Red"
                                        ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*">
                                    </asp:RegularExpressionValidator>
                                </div>
                            </div>
                            <div style="padding-top: 5px;">
                                <span>Por favor, ingrese un correo para comenzar.</span>
                                <asp:Button ID="BtnGuardar" runat="server" Text="Guardar" class="btn btn-primary boton" OnClick="BtnGuardar_Click" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <button class="btn-primary" id="snap" onclick="ValidateEmail()" style="">Capture</button>
        </div>

        <!-- Webcam video snapshot -->
        <canvas id="canvas" width="640" height="480" style="display: none"></canvas>        
    </form>
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-3.3.1.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>
    <!--Add script to update the page and send messages.-->
    <script type="text/javascript" src="/Scripts/webcam.js"></script>
    <script type="text/javascript">
        window.onload = ValidateEmail();

        function ValidateEmail() {
            var textbox = document.getElementById('<%= TxtCorreo.ClientID %>');
            var email = textbox.value;
            //window.setInterval(function () {
            CapturarFrame(email);
            //}, 30000);
        }

    </script>
</body>
</html>
